{% extends 'home.html' %}
{% load bootstrap4 %}
{% load static %}
{% block title %}Profile | {{this_student}} {% endblock %}

{% block header %}
<h1>Profile</h1>
{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block main %}
<section>
<div class="container">
<div class="row info-profile">
        <div class="col-lg-4">
           <div class="profile-card-4 z-depth-3">
            <div class="card">
              <div class="card-body text-center bg-success rounded-top">
               <div class="user-box">
                <img src="{{this_student.photo.url }}" alt="user avatar">
              </div>
              <h5 class="mb-1 text-white">{{this_student}}</h5>
             </div>
              <div class="card-body">
                <ul class="list-group shadow-none">

                <li class="list-group-item">
                  <div class="list-icon">
                    <i class="fa fa-envelope"></i>
                  </div>
                  <div class="list-details">
                    <span>{{this_student.user.email}}</span>
                    <small>Email Address</small>
                  </div>
                </li>

                </ul>
                <div class="row text-center mt-4">
                  <div class="col p-2">
                   <h4 class="mb-1 line-height-5">{{total_code}}</h4>
                    <small class="mb-0 font-weight-bold">Codes</small>
                   </div>
                    <div class="col p-2">
                      <h4 class="mb-1 line-height-5">{{total_course}}</h4>
                     <small class="mb-0 font-weight-bold">Courses</small>
                    </div>
                    <div class="col p-2">
                     <h4 class="mb-1 line-height-5">{{total_answers}}</h4>
                     <small class="mb-0 font-weight-bold">Answers</small>
                    </div>
                 </div>
               </div>
               <div class="card-footer text-center">
                 <a href="{{this_student.user.social_auth.providers}}" class="btn-social btn-github waves-effect waves-light m-1"><i class="fa fa-github"></i></a>
               </div>
             </div>
           </div>
        </div>
        <div class="col-lg-8 ">
           <div class="card z-depth-3">
            <div class="card-body">
            <ul class="nav nav-pills nav-pills-success nav-justified">
                <li class="nav-item">
                    <a href="javascript:void();" data-target="#profile" data-toggle="pill" class="nav-link active show"><i class="icon-user"></i> <span class="hidden-xs">Profile</span></a>
                </li>
                <li class="nav-item">
                    <a href="javascript:void();" data-target="#skills" data-toggle="pill" class="nav-link"><i class="icon-envelope-open"></i> <span class="hidden-xs">Skills</span></a>
                </li>

            </ul>
            <div class="tab-content p-3">
                <div class="tab-pane active show" id="profile">
                    <h5 class="mb-3">User Profile</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Bio</h6>
                            <p>
                              {% if this_student.user.student.bio %}
                                  {{this_student.user.student.bio}}
                              {% else %}
                               nothing here :)
                              {% endif %}

                            </p>
                            <h6>Rank : {{this_student.user.student.rank}} </h6>
                            <img class="rounded-circle img-responsive"
                            src="{{this_student.user.student.rank.logo.url}}" width="15%" height="25%" />
                            <p>
                                {{this_student.user.student.rank.description}}
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h6>Interests : </h6>
                            {% for interest in interests %}
                            <a href="javascript:void();"  style="background-color:{{ interest.color }};" data-color = '{{interest.color}}'  class="badge badge-dark badge-pill">{{ interest }}</a>
                            {% endfor %}

                        </div>
                        <div class="col-md-12">
                            <h5 class="mt-2 mb-3"><span class="ion-code float-right"></span> Some Shared Codes</h5>
                            <table class="table table-hover table-striped">
                                <tbody>
                                  {% for code in  web_code %}
                                    <tr>
                                        <td>
                                            <a href="{% url 'share-editor-frontend' code.code.slug code.code.pk %}"><strong>{{code.code.title}}</strong></a>
                                        </td>
                                    </tr>
                                   {% endfor %}
                                   {% for code in  other_code %}
                                     <tr>
                                         <td>
                                             <a href="{% url 'share-editor-code' code.code.slug code.code.pk %}"><strong>{{code.code.title}}</strong></a>
                                         </td>
                                     </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--/row-->
                </div>
                <div class="tab-pane row" id="skills">
                  <div class="card-box">
           <h4 class="m-t-0 m-b-20 header-title">Skills</h4>
           <div class="p-b-10" data-target='#myprogress' data-offset="0" data-spy="scroll">
             {% for course in taken_course %}
                   <p>{{course}}</p>

                   {% load index %}

                 <div class="progress progress-striped active">
                   <div  id = "myprogress" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{skills_comp|index:forloop.counter0}}" aria-valuemin="0" aria-valuemax="{{skills_mod|index:forloop.counter0}}" >
                   </div>
                   <script type="text/javascript">
                              var a = parseInt({{skills_comp|index:forloop.counter0}}) * 100 / parseInt({{skills_mod|index:forloop.counter0}});
                              document.getElementById("myprogress").style.width =  a + "%";

                   </script>
               </div>
              {% endfor %}



           </div>
       </div>
                </div>
            </div>
        </div>
      </div>
      </div>

    </div>
</div>
</section>
{% endblock %}
